module.exports=[84202,a=>{"use strict";var b=a.i(7656),c=a.i(17317),d=a.i(72663),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(49321);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],84202)},23210,a=>{"use strict";var b=a.i(17317);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},255,a=>{"use strict";var b=a.i(7656),c=a.i(49321);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},20018,a=>{"use strict";let b=(0,a.i(53264).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],20018)},4719,a=>{"use strict";var b=a.i(7656),c=a.i(65420),d=a.i(49321);function e({tabs:a,activeTab:e,onTabChange:f,className:g}){return(0,b.jsx)("div",{className:(0,d.cn)("flex gap-1 rounded-lg bg-muted/50 p-1",g),children:a.map(a=>(0,b.jsxs)("button",{onClick:()=>f(a.id),className:(0,d.cn)("relative flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-colors",e===a.id?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[e===a.id&&(0,b.jsx)(c.motion.div,{layoutId:"active-tab",className:"absolute inset-0 rounded-md bg-card shadow-sm dark:bg-card",transition:{type:"spring",stiffness:300,damping:30}}),(0,b.jsx)("span",{className:"relative",children:a.label}),void 0!==a.count&&(0,b.jsx)("span",{className:(0,d.cn)("relative flex h-5 min-w-5 items-center justify-center rounded-full px-1.5 text-xs",e===a.id?"bg-[hsl(168_76%_40%)] text-white":"bg-muted-foreground/20 text-muted-foreground"),children:a.count})]},a.id))})}a.s(["TabsNav",()=>e])},77045,a=>{"use strict";var b=a.i(7656),c=a.i(38067),d=a.i(42281),e=a.i(49321);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function h({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function i({className:a,children:f,showCloseButton:i=!0,...j}){return(0,b.jsxs)(g,{"data-slot":"dialog-portal",children:[(0,b.jsx)(h,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,i&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function j({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function l({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function m({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>i,"DialogDescription",()=>m,"DialogFooter",()=>k,"DialogHeader",()=>j,"DialogTitle",()=>l])},74524,a=>{"use strict";let b=(0,a.i(53264).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],74524)},28548,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function c(a){}async function d(a,c={}){let f={"Content-Type":"application/json",...c.headers||{}},g=await fetch(`${b}${a}`,{...c,headers:f});if(!g.ok){let a=await g.json().catch(()=>({}));throw new e(a.message||a.detail||`API Error: ${g.status}`,g.status,a)}return g.json()}class e extends Error{status;data;constructor(a,b,c){super(a),this.name="APIError",this.status=b,this.data=c}}async function f(a){let b=await d("/auth/login",{method:"POST",body:JSON.stringify(a)});return c(b.access_token),b}async function g(a){let b=await d("/auth/signup",{method:"POST",body:JSON.stringify(a)});return c(b.access_token),b}async function h(){return d("/attendance/check-in",{method:"POST"})}async function i(){return d("/attendance/check-out",{method:"POST"})}async function j(a){let b=new URLSearchParams;a?.start_date&&b.append("start_date",a.start_date),a?.end_date&&b.append("end_date",a.end_date),a?.user_id&&b.append("user_id",String(a.user_id));let c=b.toString();return d(`/attendance/history${c?`?${c}`:""}`)}async function k(a){return d("/leave/requests",{method:"POST",body:JSON.stringify(a)})}async function l(a=1,b=10){return d(`/leave/my-requests?page=${a}&page_size=${b}`)}async function m(a=1,b=10,c){let e=new URLSearchParams({page:String(a),page_size:String(b)});return c&&e.append("status_filter",c),d(`/leave/requests?${e.toString()}`)}async function n(a,b){return d(`/leave/${a}/approve`,{method:"POST",body:JSON.stringify(b||{})})}async function o(a,b){return d(`/leave/${a}/reject`,{method:"POST",body:JSON.stringify(b||{})})}a.s(["APIError",()=>e,"approveLeaveRequest",()=>n,"checkIn",()=>h,"checkOut",()=>i,"createLeaveRequest",()=>k,"getAllLeaveRequests",()=>m,"getAttendanceHistory",()=>j,"getMyLeaveRequests",()=>l,"login",()=>f,"rejectLeaveRequest",()=>o,"signup",()=>g])},94466,a=>{"use strict";var b=a.i(7656),c=a.i(49321);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},11027,a=>{"use strict";var b=a.i(7656),c=a.i(17317),d=a.i(24206),e=a.i(30418),f=a.i(10906),g=a.i(78199),h=a.i(4719),i=a.i(77045),j=a.i(93745),k=a.i(94466),l=a.i(84202),m=a.i(74524);function n({open:a,onOpenChange:d,request:e,onApprove:f,onReject:g}){let[h,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),s=async a=>{e&&(p(!0),r(a),await new Promise(a=>setTimeout(a,1e3)),"approve"===a?f(e.id,h):g(e.id,h),p(!1),r(null),n(""),d(!1))};return e?(0,b.jsx)(i.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Review Leave Request"}),(0,b.jsxs)(i.DialogDescription,{children:["Review and respond to the leave request from ",e.employeeName,"."]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type"}),(0,b.jsxs)("p",{className:"font-medium capitalize",children:[e.type," Leave"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Duration"}),(0,b.jsxs)("p",{className:"font-medium",children:[e.startDate," - ",e.endDate]})]})]}),e.remarks&&(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Employee Remarks"}),(0,b.jsx)("p",{className:"mt-1 rounded-md bg-muted p-2",children:e.remarks})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"approverRemarks",children:"Your Response (Optional)"}),(0,b.jsx)(k.Textarea,{id:"approverRemarks",value:h,onChange:a=>n(a.target.value),placeholder:"Add a note for the employee...",rows:3})]})]}),(0,b.jsxs)(i.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>d(!1),disabled:o,children:"Cancel"}),(0,b.jsxs)(j.Button,{variant:"destructive",onClick:()=>s("reject"),disabled:o,children:[o&&"reject"===q&&(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Reject"]}),(0,b.jsxs)(j.Button,{onClick:()=>s("approve"),disabled:o,children:[o&&"approve"===q&&(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Approve"]})]})]})}):null}var o=a.i(97722),p=a.i(76607),q=a.i(20018);let r=(0,a.i(53264).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var s=a.i(37599),t=a.i(9426),u=a.i(41577),v=a.i(28548);function w(){let[a,i]=(0,c.useState)("pending"),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[q,r]=(0,c.useState)([]),[w,z]=(0,c.useState)(!0),A=(0,c.useRef)(null);(0,t.useScrollAnimation)(A,u.leaveApprovalAnimationOptions.table),(0,c.useEffect)(()=>{!async function(){try{let a=(await (0,v.getAllLeaveRequests)(1,100)).leave_requests.map(a=>({id:String(a.id),employeeId:String(a.user_id),employeeName:`Employee ${a.user_id}`,type:a.leave_type.toLowerCase(),startDate:a.start_date,endDate:a.end_date,status:a.status.toLowerCase(),remarks:a.reason}));r(a)}catch(a){console.error("Failed to fetch leave requests:",a)}finally{z(!1)}}()},[]);let B=q.filter(a=>"pending"===a.status),C=q.filter(a=>"approved"===a.status),D=q.filter(a=>"rejected"===a.status),E="pending"===a?B:"approved"===a?C:D,F=async()=>{try{let a=(await (0,v.getAllLeaveRequests)(1,100)).leave_requests.map(a=>({id:String(a.id),employeeId:String(a.user_id),employeeName:`Employee ${a.user_id}`,type:a.leave_type.toLowerCase(),startDate:a.start_date,endDate:a.end_date,status:a.status.toLowerCase(),remarks:a.reason}));r(a)}catch(a){console.error("Failed to refresh data:",a)}},G=async(a,b)=>{try{await (0,v.approveLeaveRequest)(Number(a),{comments:b}),s.toast.success(`Leave request approved${b?` with remarks: ${b}`:""}`,{duration:u.leaveApprovalAnimationOptions.toast.autoDismiss}),await F()}catch(a){a instanceof v.APIError?s.toast.error(a.message):s.toast.error("Failed to approve leave request")}},H=async(a,b)=>{try{await (0,v.rejectLeaveRequest)(Number(a),{comments:b}),s.toast.error(`Leave request rejected${b?` with remarks: ${b}`:""}`,{duration:u.leaveApprovalAnimationOptions.toast.autoDismiss}),await F()}catch(a){a instanceof v.APIError?s.toast.error(a.message):s.toast.error("Failed to reject leave request")}},I=[{key:"employee",header:"Employee",cell:a=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(p.Avatar,{className:"h-10 w-10 ring-2 ring-border/50",children:[(0,b.jsx)(p.AvatarImage,{src:"/placeholder.svg",alt:a.employeeName}),(0,b.jsx)(p.AvatarFallback,{className:"bg-gradient-to-br from-[hsl(174_70%_17%)] to-[hsl(168_76%_40%)] text-xs font-semibold text-white",children:a.employeeName.split(" ").map(a=>a[0]).join("")})]}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"font-medium",children:a.employeeName})})]})},{key:"type",header:"Leave Type",cell:a=>(0,b.jsxs)("span",{className:"capitalize",children:[a.type," Leave"]})},{key:"dates",header:"Duration",cell:a=>(0,b.jsxs)("span",{className:"font-mono text-sm text-muted-foreground",children:[a.startDate," - ",a.endDate]})},{key:"remarks",header:"Reason",cell:a=>(0,b.jsx)("span",{className:"max-w-[200px] truncate text-muted-foreground",children:a.remarks||"-"})},{key:"status",header:"Status",cell:a=>(0,b.jsx)(o.StatusBadge,{variant:(a=>{switch(a){case"approved":return"success";case"rejected":return"destructive";default:return"pending"}})(a.status),dot:!0,className:"capitalize leave-approval-status-cell",children:a.status})},{key:"actions",header:"",cell:a=>"pending"===a.status&&(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(x,{onClick:()=>{k(a),m(!0)}}),(0,b.jsx)(y,{onClick:()=>{k(a),m(!0)}})]}),className:"w-24"}];return(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)(d.PageHeader,{title:"Leave Approvals",subtitle:"Review and manage employee leave requests",breadcrumbs:[{label:"Admin Dashboard",href:"/admin/dashboard"},{label:"Leave Approvals"}]}),(0,b.jsx)("div",{className:"space-y-6 p-4 lg:p-6",children:(0,b.jsxs)(e.SectionCard,{children:[(0,b.jsx)(h.TabsNav,{tabs:[{id:"pending",label:"Pending",count:B.length},{id:"approved",label:"Approved",count:C.length},{id:"rejected",label:"Rejected",count:D.length}],activeTab:a,onTabChange:i,className:"mb-6"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.TableFilters,{searchPlaceholder:"Search by employee name...",filters:[{key:"type",label:"Type",options:[{label:"Annual",value:"annual"},{label:"Sick",value:"sick"},{label:"Personal",value:"personal"},{label:"Unpaid",value:"unpaid"}]}]}),(0,b.jsx)("div",{ref:A,className:"leave-approval-table",children:(0,b.jsx)(f.DataTable,{columns:I,data:E,emptyTitle:`No ${a} requests`,emptyDescription:`There are no ${a} leave requests at the moment`})})]})]})}),(0,b.jsx)(n,{open:l,onOpenChange:m,request:j,onApprove:G,onReject:H})]})}function x({onClick:a}){let d=(0,c.useRef)(null);return(0,t.useHoverAnimation)(d,u.leaveApprovalAnimationOptions.approveButtonHover),(0,b.jsxs)(j.Button,{ref:d,variant:"ghost",size:"icon",className:"leave-approval-approve-button h-9 w-9 text-emerald-600 hover:bg-emerald-50 hover:text-emerald-700",onClick:a,children:[(0,b.jsx)(q.CheckCircle,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Approve"})]})}function y({onClick:a}){let d=(0,c.useRef)(null);return(0,t.useHoverAnimation)(d,u.leaveApprovalAnimationOptions.rejectButtonHover),(0,b.jsxs)(j.Button,{ref:d,variant:"ghost",size:"icon",className:"leave-approval-reject-button h-9 w-9 text-rose-500 hover:bg-rose-50 hover:text-rose-600",onClick:a,children:[(0,b.jsx)(r,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Reject"})]})}a.s(["default",()=>w],11027)}];

//# sourceMappingURL=Desktop_Dayflow_60b0e2f6._.js.map